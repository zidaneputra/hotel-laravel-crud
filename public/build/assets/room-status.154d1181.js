$(function(){if(!window.location.pathname.split("/").includes("roomstatus"))return;const a=$("#roomstatus-table").DataTable({processing:!0,serverSide:!0,ajax:{url:"/roomstatus",type:"GET",error:function(e,t,s){}},columns:[{name:"number",data:"number"},{name:"name",data:"name"},{name:"code",data:"code"},{name:"information",data:"information"},{name:"id",data:"id",width:"100px",render:function(e){return`
                        <button class="btn btn-light btn-sm rounded shadow-sm border"
                            data-action="edit-roomstatus" data-roomstatus-id="${e}"
                            data-bs-toggle="tooltip" data-bs-placement="top" title="Edit roomstatus">
                            <i class="fas fa-edit"></i>
                        </button>
                        <form class="btn btn-sm delete-roomstatus" method="POST"
                            id="delete-roomstatus-form-${e}"
                            action="/roomstatus/${e}">
                            <input type="hidden" name="_method" value="DELETE">
                            <a class="btn btn-light btn-sm rounded shadow-sm border delete"
                                href="#" roomstatus-id="${e}" roomstatus-role="roomstatus" data-bs-toggle="tooltip"
                                data-bs-placement="top" title="Delete roomstatus">
                                <i class="fas fa-trash-alt"></i>
                            </a>
                        </form>

                    `}}]}),o=new bootstrap.Modal($("#main-modal"),{backdrop:!0,keyboard:!0,focus:!0});$(document).on("click",".delete",function(){var e=$(this).attr("roomstatus-id");$(this).attr("roomstatus-name"),$(this).attr("roomstatus-url"),Swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:"Are you sure?",text:"Type will be deleted, You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel! ",reverseButtons:!0}).then(s=>{s.isConfirmed&&$(`#delete-roomstatus-form-${e}`).submit()})}).on("click","#add-button",async function(){o.show(),$("#main-modal .modal-body").html("Fetching data");const e=await $.get("/roomstatus/create");!e||($("#main-modal .modal-title").text("Create new roomstatus"),$("#main-modal .modal-body").html(e.view),$(".select2").select2())}).on("click","#btn-modal-save",function(){$("#form-save-roomstatus").submit()}).on("submit","#form-save-roomstatus",async function(e){e.preventDefault(),CustomHelper.clearError(),$("#btn-modal-save").attr("disabled",!0);try{const t=await $.ajax({url:$(this).attr("action"),data:$(this).serialize(),method:$(this).attr("method"),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});if(!t)return;Swal.fire({position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:1500}),o.hide(),a.ajax.reload()}catch(t){t.status===422&&(console.log(t),Swal.fire({icon:"error",title:"Oops...",text:t.responseJSON.message}),CustomHelper.errorHandlerForm(t))}finally{$("#btn-modal-save").attr("disabled",!1)}}).on("click",'[data-action="edit-roomstatus"]',async function(){o.show(),$("#main-modal .modal-body").html("Fetching data");const e=$(this).data("roomstatus-id"),t=await $.get(`/roomstatus/${e}/edit`);!t||($("#main-modal .modal-title").text("Edit Room Status"),$("#main-modal .modal-body").html(t.view),$(".select2").select2())}).on("submit",".delete-roomstatus",async function(e){e.preventDefault();try{const t=await $.ajax({url:$(this).attr("action"),data:$(this).serialize(),method:$(this).attr("method"),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});if(!t)return;Swal.fire({position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:1500}),a.ajax.reload()}catch(t){t&&t.responseJSON&&t.responseJSON.message&&Swal.fire({position:"top-end",icon:"error",title:t.responseJSON.message,showConfirmButton:!1,timer:1500})}})});
